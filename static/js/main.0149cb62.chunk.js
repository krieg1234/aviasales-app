(this["webpackJsonpaviasales-app"]=this["webpackJsonpaviasales-app"]||[]).push([[0],{68:function(t,e,n){},69:function(t,e,n){},95:function(t,e,n){"use strict";n.r(e);var r=n(3),a=n(0),c=n.n(a),s=n(19),i=n.n(s),o=(n(68),n(69),n(10)),u=n(11),l=n(13),j=n(12),b=n(97),d=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(b.a,{fluid:!0,style:{backgroundColor:"#212529",color:"#fff"},children:Object(r.jsx)(b.a,{style:{display:"flex",justifyContent:"center",padding:"10px"},children:Object(r.jsx)("h1",{children:"Aviasales.ru by KRiEG1234"})})})}}]),n}(c.a.Component),p=n(98),O=n(52),f=n(101),h=n(100),g=n(102),x=n(17),y=n(27),v=n.n(y),m=n(31),k=n(105),T=n(39),I=n.n(T),S=function(){var t=Object(m.a)(v.a.mark((function t(){var e,n,r,a,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("https://front-test.beta.aviasales.ru/search");case 2:return e=t.sent,t.next=5,I.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e.data.searchId));case 5:return n=t.sent,r=n.data,a=r.tickets,c=r.stop,t.abrupt("return",{tickets:a,stop:c});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=Object(k.a)("TICKETS_LIST_BUILD"),L=Object(k.a)("TICKETS_LIST_SORT"),E=Object(k.a)("FILTER_ADD"),w=Object(k.a)("FILTER_REMOVE"),F=Object(k.a)("TICKETS_LIST_UPDATE_REQUEST"),_=Object(k.a)("TICKETS_LIST_UPDATE_SUCCESS"),D=Object(k.a)("TICKETS_LIST_UPDATE_FAILURE"),N=function(){var t=Object(m.a)(v.a.mark((function t(e){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(F()),t.prev=1,t.next=4,S();case 4:n=t.sent,r=n.tickets,e(_(r)),e(C()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e(D()),[{price:100,carrier:"string",segments:[{origin:"string",destination:"string",date:"string",stops:["string","string"],duration:1},{origin:"string",destination:"string",date:"string",stops:["string"],duration:4}]},{price:999,carrier:"string",segments:[{origin:"string",destination:"string",date:"string",stops:["string","string"],duration:5},{origin:"string",destination:"string",date:"string",stops:["string"],duration:2}]},{price:666,carrier:"string",segments:[{origin:"string",destination:"string",date:"string",stops:["string"],duration:3},{origin:"string",destination:"string",date:"string",stops:["string"],duration:1}]},{price:333,carrier:"string",segments:[{origin:"string",destination:"string",date:"string",stops:["string","string","string","string"],duration:6},{origin:"string",destination:"string",date:"string",stops:["string","string"],duration:8}]}];case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),A=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).filterTasksListHandler=function(e){e.preventDefault(),(0,t.props.dispatch)(C())},t.updateFilterHandler=function(e,n){return function(r){var a=t.props.dispatch,c={filterType:n,value:e};r.target.checked?a(E(c)):a(w(c)),a(C())}},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(g.a,{onSubmit:this.filterTasksListHandler,className:"rounded-lg my-2 p-2 shadow-lg",children:[Object(r.jsxs)(g.a.Group,{children:[Object(r.jsx)(g.a.Label,{className:"my-2 bold text-uppercase",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(r.jsx)(g.a.Check,{className:"my-2",type:"checkbox",label:"\u0412\u0441\u0435",onInput:this.updateFilterHandler(1/0,"byStops")}),Object(r.jsx)(g.a.Check,{className:"my-2",type:"checkbox",label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",onInput:this.updateFilterHandler(0,"byStops")}),Object(r.jsx)(g.a.Check,{className:"my-2",type:"checkbox",label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",onInput:this.updateFilterHandler(1,"byStops")}),Object(r.jsx)(g.a.Check,{className:"my-2",type:"checkbox",label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",onInput:this.updateFilterHandler(2,"byStops")}),Object(r.jsx)(g.a.Check,{className:"my-2",type:"checkbox",label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",onInput:this.updateFilterHandler(3,"byStops")})]}),Object(r.jsxs)(g.a.Label,{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e: ",this.props.ticketsCount," \u0431\u0438\u043b\u0435\u0442\u043e\u0432"]})]})}}]),n}(c.a.Component),K=Object(x.b)((function(t){return{ticketsCount:t.tickets.buildedTicketsList.length,filters:t.tickets.filters}}))(A),R=n(53),H=n(104),P=n(99),U=n(18),B=n(54);function M(){var t=Object(R.a)(["\n.card:hover {\n  border: solid;\n  border-color: #2196F3;\n}\n"]);return M=function(){return t},t}var G=B.a.div(M()),J=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.data,e=t.price,n=t.carrier,a=t.segments;return Object(r.jsx)(G,{children:Object(r.jsxs)(H.a,{className:"rounded-lg my-2 p-2 shadow-lg text-uppercase",children:[Object(r.jsxs)(p.a,{children:[Object(r.jsxs)(O.a,{md:"8",className:"price",style:{fontWeight:"600",fontSize:"24px",color:"#2196F3"},children:[e," \u0440"]}),Object(r.jsx)(O.a,{children:Object(r.jsx)(P.a,{src:"//pics.avs.io/99/36/".concat(n,".png")})})]}),a.map((function(t){var e=t.origin,n=t.destination,a=t.date,c=t.stops,s=t.duration,i=new Date(Date.parse(a)),o=function(t){var e=t%60;return Math.trunc(t/60)+"\u0447 "+(e>9?e:"0".concat(e))+"\u043c"}(s),u=new Date(Date.parse(a)+6e4*s),l=i.toLocaleTimeString(),j=u.toLocaleTimeString();return Object(r.jsx)("div",{children:Object(r.jsxs)(p.a,{children:[Object(r.jsxs)(O.a,{children:[Object(r.jsxs)("p",{children:[e,"-",n]}),Object(r.jsxs)("p",{className:"font-weight-bold",children:[l," - ",j]})]}),Object(r.jsxs)(O.a,{children:[Object(r.jsx)("p",{children:"\u0412\u0440\u0435\u043c\u044f \u0432 \u043f\u0443\u0442\u0438"}),Object(r.jsx)("p",{className:"font-weight-bold",children:o})]}),Object(r.jsxs)(O.a,{children:[Object(r.jsxs)("p",{children:[c.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"]}),Object(r.jsx)("p",{className:"font-weight-bold",children:c.join(", ")})]})]})},Object(U.uniqueId)())}))]})})}}]),n}(c.a.Component),q=Object(x.b)((function(t){return{}}))(J),z=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.dispatch;t(N),t(C())}},{key:"render",value:function(){var t=this.props.tickets;return Object(r.jsx)("div",{children:t.buildedTicketsList.map((function(e){return Object(r.jsx)(q,{data:t.byId[e]},e)}))})}}]),n}(c.a.Component),Q=Object(x.b)((function(t){return{tickets:t.tickets}}))(z),V=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).sortTicketsListByPriceEvent=function(e){var n=t.props.dispatch;n(L(e)),n(C())},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(p.a,{children:[Object(r.jsx)(O.a,{md:"3",children:Object(r.jsx)(K,{})}),Object(r.jsxs)(O.a,{md:"9",children:[Object(r.jsxs)(f.a,{defaultActiveKey:"cheapest",id:"tickets-sort-tab",onSelect:this.sortTicketsListByPriceEvent,children:[Object(r.jsx)(h.a,{eventKey:"cheapest",title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439"}),Object(r.jsx)(h.a,{eventKey:"fastest",title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"})]}),Object(r.jsx)(Q,{})]})]})}}]),n}(c.a.Component),W=Object(x.b)((function(t){return{}}))(V),X=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(b.a,{fluid:!0,style:{backgroundColor:"#212529",color:"#fff"},children:Object(r.jsx)(b.a,{style:{display:"flex",justifyContent:"center",padding:"10px"},children:Object(r.jsx)("p",{children:"created by KRiEG1234"})})})}}]),n}(c.a.Component);var Y,Z=function(){return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(d,{}),Object(r.jsx)(b.a,{children:Object(r.jsx)(W,{})}),Object(r.jsx)(X,{})]})},$=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))},tt=(n(94),n(60)),et=n(20),nt=n(61),rt=n(9),at=n(6),ct=n(103),st=function(t){return function(e,n){var r=t[e].price,a=t[n].price;return r>a?1:r<a?-1:0}},it=function(t){return function(e,n){var r=t[e].segments.map((function(t){return t.duration})),a=t[n].segments.map((function(t){return t.duration})),c=U.min(r),s=U.min(a);return c>s?1:c<s?-1:0}},ot=function(t,e){if(0===e.length)return!0;var n=U.min(e),r=t.segments.map((function(t){return t.stops.length}));return n>=U.max(r)},ut={byId:{},allTickets:[],buildedTicketsList:[],sortOption:"cheapest",filters:{byStops:[]}},lt=Object(ct.a)((Y={},Object(rt.a)(Y,_,(function(t,e){var n=e.payload.filter((function(t,e){return e<10})).reduce((function(t,e,n){return Object(at.a)(Object(at.a)({},t),{},Object(rt.a)({},n,e))}),{}),r=Object.keys(n);return Object(at.a)(Object(at.a)({},t),{},{byId:n,allTickets:r})})),Object(rt.a)(Y,D,(function(){return console.log("ALARM!"),ut})),Object(rt.a)(Y,F,(function(){return console.log("wait..."),ut})),Object(rt.a)(Y,L,(function(t,e){var n=e.payload;return Object(at.a)(Object(at.a)({},t),{},{sortOption:n})})),Object(rt.a)(Y,E,(function(t,e){var n=e.payload,r=n.filterType,a=n.value;return Object(at.a)(Object(at.a)({},t),{},{filters:Object(at.a)(Object(at.a)({},t.filters),{},Object(rt.a)({},r,[].concat(Object(nt.a)(t.filters[r]),[a])))})})),Object(rt.a)(Y,w,(function(t,e){var n=e.payload,r=n.filterType,a=n.value;return Object(at.a)(Object(at.a)({},t),{},{filters:Object(at.a)(Object(at.a)({},t.filters),{},Object(rt.a)({},r,t.filters[r].filter((function(t){return t!==a}))))})})),Object(rt.a)(Y,C,(function(t){var e={byStops:ot},n=Object.keys(t.filters),r=t.allTickets.filter((function(r){var a=[];return n.forEach((function(n){a.push(e[n](t.byId[r],t.filters[n]))})),!a.includes(!1)})),a=t.sortOption,c={cheapest:st,fastest:it},s=r.sort(c[a](t.byId));return Object(at.a)(Object(at.a)({},t),{},{buildedTicketsList:s})})),Y),ut),jt=Object(et.c)({tickets:lt}),bt=Object(et.d)(jt,Object(et.a)(tt.a));i.a.render(Object(r.jsx)(x.a,{store:bt,children:Object(r.jsx)(Z,{})}),document.getElementById("root")),$()}},[[95,1,2]]]);
//# sourceMappingURL=main.0149cb62.chunk.js.map